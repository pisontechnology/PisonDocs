
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Pison SDK</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #ef8540;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #ef8540;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #ef8540;
}
.highlight .nc {
  color: #ef8540;
}
.highlight .nd {
  color: #ef8540;
}
.highlight .ne {
  color: #ef8540;
}
.highlight .nf, .highlight .fm {
  color: #ef8540;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-c9d8fa83.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-b12a2749.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;kotlin--android&quot;,&quot;kotlin--jvm&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-f0bbc5fb.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="kotlin--android">kotlin--android</a>
              <a href="#" data-language-name="kotlin--jvm">kotlin--jvm</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#pison-gesture-guide" class="toc-h1 toc-link" data-title="Pison Gesture Guide">Pison Gesture Guide</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#understanding-gestures" class="toc-h2 toc-link" data-title="Understanding Gestures">Understanding Gestures</a>
                  </li>
                  <li>
                    <a href="#what-is-the-vulcan-control-band" class="toc-h2 toc-link" data-title="What is the Vulcan Control Band?">What is the Vulcan Control Band?</a>
                  </li>
                  <li>
                    <a href="#waking-the-vulcan-control-band" class="toc-h2 toc-link" data-title="Waking the Vulcan Control Band">Waking the Vulcan Control Band</a>
                  </li>
                  <li>
                    <a href="#gestures" class="toc-h2 toc-link" data-title="Gestures">Gestures</a>
                  </li>
                  <li>
                    <a href="#swipe-gestures" class="toc-h2 toc-link" data-title="Swipe Gestures">Swipe Gestures</a>
                  </li>
                  <li>
                    <a href="#developer-settings" class="toc-h2 toc-link" data-title="Developer Settings">Developer Settings</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#sdk-library-installation" class="toc-h1 toc-link" data-title="SDK Library Installation">SDK Library Installation</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#installation-via-gradle-maven-preferred" class="toc-h2 toc-link" data-title="Installation via Gradle/Maven (preferred)">Installation via Gradle/Maven (preferred)</a>
                  </li>
                  <li>
                    <a href="#alternate-installation-via-jar-aar" class="toc-h2 toc-link" data-title="Alternate Installation via .jar/.aar">Alternate Installation via <code>.jar</code>/<code>.aar</code></a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#reactive-programming" class="toc-h1 toc-link" data-title="Reactive Programming">Reactive Programming</a>
          </li>
          <li>
            <a href="#creating-a-39-pisonsdk-39-instance" class="toc-h1 toc-link" data-title="Creating a 'PisonSdk' instance">Creating a 'PisonSdk' instance</a>
          </li>
          <li>
            <a href="#connecting-to-the-server" class="toc-h1 toc-link" data-title="Connecting to the server">Connecting to the server</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#1-local-pison-server" class="toc-h2 toc-link" data-title="1. Local Pison Server">1. Local Pison Server</a>
                  </li>
                  <li>
                    <a href="#2-named-pison-server" class="toc-h2 toc-link" data-title="2. Named Pison Server">2. Named Pison Server</a>
                  </li>
                  <li>
                    <a href="#3-automatic-service-discovery-experimental" class="toc-h2 toc-link" data-title="3. Automatic Service Discovery (Experimental)">3. Automatic Service Discovery (Experimental)</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#monitoring-pison-devices" class="toc-h1 toc-link" data-title="Monitoring Pison Devices">Monitoring Pison Devices</a>
          </li>
          <li>
            <a href="#real-time-device-data" class="toc-h1 toc-link" data-title="Real-Time Device Data">Real-Time Device Data</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#1-user-state" class="toc-h2 toc-link" data-title="1. User State">1. User State</a>
                  </li>
                  <li>
                    <a href="#2-device-state" class="toc-h2 toc-link" data-title="2. Device State">2. Device State</a>
                  </li>
                  <li>
                    <a href="#3-events" class="toc-h2 toc-link" data-title="3. Events">3. Events</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#haptics" class="toc-h1 toc-link" data-title="Haptics">Haptics</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#haptic-attributes" class="toc-h2 toc-link" data-title="Haptic Attributes">Haptic Attributes</a>
                  </li>
                  <li>
                    <a href="#haptic-examples" class="toc-h2 toc-link" data-title="Haptic Examples">Haptic Examples</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://github.com/slatedocs/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h3 id='welcome-to-the-pison-sdk-documentation'>Welcome to the Pison SDK Documentation!</h3>
<p><strong>This SDK was designed to interact with an instance of the Pison Server running on your local device or network*. The Pison Server is a piece of software that directly connects to and communicates with the Pison hardware. It handles the hard work of parsing, processing, and storing data sent from our Vulcan Control Band and exposes a simplified API for our development partners (like you!).</strong></p>

<blockquote>
<p>Note: networked usage of the Pison SDK is currently experimental!</p>
</blockquote>

<p><strong>Please make sure you have a version of the Pison Server installed and running alongside your application before trying to use this SDK. Your application will not work without it! On Android, the Pison Server is wrapped in an application called Vulcan.</strong></p>
<h1 id='pison-gesture-guide'>Pison Gesture Guide</h1><h2 id='understanding-gestures'>Understanding Gestures</h2>
<p>A gesture is defined as a specific instance of a hand posture that can be mapped to a specific activity, such as activation/wake, gesture, and compound gesture. The gestures described in this section are dynamic gestures; that is, gestures in which the user moves at least one part of their arm or hand. The user making gestures must be wearing a properly worn and calibrated Vulcan Control Band also referred to as Control Band.</p>

<p>All gestures described in this section are supported in the SDK. All inference output from gestures is sent in the <code>frameTags</code> as an SDK output contained in <code>DeviceFrames</code> and can be monitored by client applications.</p>
<h2 id='what-is-the-vulcan-control-band'>What is the Vulcan Control Band?</h2>
<p>The Vulcan Control Band is a wrist-worn wearable device equipped with an ENG sensor array, IMU, LED indicator, control button, and haptic feedback generator. It is used in conjunction with the Vulcan app to calibrate the system to the user and process ENG signals to create gesture inferences.</p>

<p>For more detailed information on the Control Band, including donning and calibrating it, please request a copy of the Vulcan User Manual.</p>
<h2 id='waking-the-vulcan-control-band'>Waking the Vulcan Control Band</h2>
<p>The Control Band continuously streams data by default (when connected to a compatible smartphone with the Vulcan app installed). As such, neither the Vulcan Control Band nor the Vulcan app require a specific action to wake the device and begin streaming data. The Pison team recognizes the importance of this functionality and have developed this concept within the SDK. You will see this referenced below as a <code>SHAKE</code> gesture.</p>

<p>Unlike other smart assistance platforms, <code>SHAKE</code> is not a typical wake word. While developers <em>can</em> require a user to perform a specific gesture to prompt a listening window, Pison leaves this up to the developers of end user applications.</p>

<p>Through Pison&#39;s own product development efforts, we have determined that this makes sense for customers who are building companion applications to Vulcan, including plugins for Android Team Awareness Kit (ATAK). Within ATAK, a <code>SHAKE</code> gesture must precede any gesture.</p>

<p>A user performs a <code>SHAKE</code> by making a loosely closed fist with the thumb against the side of the hand and the wrist perpendicular to the ground, then turning the fist and returning it to the starting position. The IMU (device state that includes the latest readings from the Control Band&#39;s gyroscope, accelerometer, and magnetometer) detects a 60 degree wrist roll, either to the left or right, to register a <code>SHAKE</code>. You can configure the minimum and maximum time the Vulcan app will listen for a gesture to follow a <code>SHAKE</code>; see <a href="#vulcan-app-developer-settings">Vulcan App Developer Settings</a> for more information.</p>

<p>SDK output: <code>SHAKE</code> or <code>SHAKE_N_&lt;gesture&gt;</code> when used to activate a specific gesture. For example, <code>SHAKE_N_FHEH</code> followed by <code>FHEH_SWIPE_UP</code>.</p>
<h2 id='gestures'>Gestures</h2>
<p>Pison uses a custom machine learning library that has models for three basic electroneurography (ENG) gestures. These gestures are inferred through processing of electromyographical data gathered from the user&#39;s wrist. When the Vulcan Control Band is properly worn and calibrated, it can be used as an input for technology-enabled experiences.</p>
<h3 id='index-extension'>Index Extension</h3>
<p>Index Extension is a loosely closed fist with index finger fully extended.</p>

<p>SDK Output: <code>INEH</code></p>

<!--- Note: This section can be restored when click and hold are introduced in the SDK. These are currently possible when implemented by a client, but is not a function of the SDK. - CP 1/4/2023

### Index Click

Index Click is registered when a user makes an Index Extension (INEH) gesture and releases it within a total time that is less than n milliseconds. This gesture can be used for selection or confirmation.

### Index Hold

Index Hold is registered when a user makes an Index Extension (INEH) gesture and releases it within a total time that is greater than n milliseconds. This gesture can be used for shortcut selection.
--->
<h3 id='thumb-extension'>Thumb Extension</h3>
<p>Thumb Extension is a loosely closed fist with thumb fully extended.</p>

<p>SDK Output: <code>TEH</code></p>
<h3 id='full-hand-extension'>Full Hand Extension</h3>
<p>Full Hand Extension is the entire hand open with the palm perpendicular to the ground.</p>

<p>SDK Output: <code>FHEH</code></p>
<h2 id='swipe-gestures'>Swipe Gestures</h2>
<p>Swipe gestures are compound gestures, that is, additions to gesture primitives. A swipe requires that the user hold the gesture (for example, Index Extension) while moving in a specified direction (up, down, left, or right) at least 20 degrees. (See the section that follows, <a href="#vulcan-app-developer-settings">Vulcan App Developer Settings</a>, for details about customizing the swipe thresholds to be more or less than 20 degrees.)</p>

<p>The user cannot perform another swipe until they release the gesture (goes back to <code>REST</code>) and begin another gesture.</p>

<p>Once the user has initiated a swipe, the originating gesture inference (e.g. <code>INEH</code>) is maintained even if the inference switches to <code>FHEH</code>, <code>TEH</code>, or <code>NAC</code> (not a class), basically anything that indicates the user is still attempting to hold a gesture, until the inference determines <code>REST</code> or the user meets the minimum swipe threshold degrees of movement from start position.</p>

<p>The following table lists the supported swipe gestures and their corresponding SDK output.</p>

<table><thead>
<tr>
<th><strong>Swipe Gesture</strong></th>
<th><strong>SDK Output</strong></th>
</tr>
</thead><tbody>
<tr>
<td>Index Extension Hold + Swipe Up</td>
<td><code>INEH_SWIPE_UP</code></td>
</tr>
<tr>
<td>Index Extension Hold + Swipe Down</td>
<td><code>INEH_SWIPE_DOWN</code></td>
</tr>
<tr>
<td>Index Extension Hold + Swipe Left</td>
<td><code>INEH_SWIPE_LEFT</code></td>
</tr>
<tr>
<td>Index Extension Hold + Swipe Right</td>
<td><code>INEH_SWIPE_RIGHT</code></td>
</tr>
<tr>
<td>Thumb Extension Hold + Swipe Up</td>
<td><code>TEH_SWIPE_UP</code></td>
</tr>
<tr>
<td>Thumb Extension Hold + Swipe Down</td>
<td><code>TEH_SWIPE_DOWN</code></td>
</tr>
<tr>
<td>Thumb Extension Hold + Swipe Left</td>
<td><code>TEH_SWIPE_LEFT</code></td>
</tr>
<tr>
<td>Thumb Extension Hold + Swipe Right</td>
<td><code>TEH_SWIPE_RIGHT</code></td>
</tr>
<tr>
<td>Full Hand Extension Hold + Swipe Up</td>
<td><code>FHEH_SWIPE_UP</code></td>
</tr>
<tr>
<td>Full Hand Extension Hold + Swipe Down</td>
<td><code>FHEH_SWIPE_DOWN</code></td>
</tr>
<tr>
<td>Full Hand Extension Hold + Swipe Left</td>
<td><code>FHEH_SWIPE_LEFT</code></td>
</tr>
<tr>
<td>Full Hand Extension Hold + Swipe Right</td>
<td><code>FHEH_SWIPE_RIGHT</code></td>
</tr>
</tbody></table>
<h2 id='developer-settings'>Developer Settings</h2><h3 id='swipe-thresholds'>Swipe Thresholds</h3>
<table><thead>
<tr>
<th><strong>Setting</strong></th>
<th><strong>Description</strong></th>
<th><strong>Impact of Decreasing</strong></th>
<th><strong>Impact of Increasing</strong></th>
<th><strong>Recommended Change</strong></th>
</tr>
</thead><tbody>
<tr>
<td>Swipe Left/Right/Up/Down Min Threshold</td>
<td>Minimum distance in degrees required to detect swipe</td>
<td>Swipe gestures may feel more natural, but false-positive rate may increase</td>
<td>Requires larger arm movement, may feel unnatural</td>
<td>Do not increase the default value of 20 degrees</td>
</tr>
</tbody></table>
<h3 id='post-shake-wait-settings'>Post-shake Wait Settings</h3>
<p>Client applications are responsible for determining whether a <code>SHAKE</code> gesture is required to begin listening for a user to perform a gesture. When used with ATAK, A <code>SHAKE</code> gesture temporarily wakes the Vulcan app so that it knows that other gestures will likely follow. The <code>Post Shake Min Wait</code> and <code>Post Shake Max Wait</code> settings combine to control the timing (in milliseconds) for a lockout for when Vulcan will start and stop listening for a gesture following a <code>SHAKE</code>.</p>

<table><thead>
<tr>
<th><strong>Setting</strong></th>
<th><strong>Description</strong></th>
<th><strong>Impact of Decreasing</strong></th>
<th><strong>Impact of Increasing</strong></th>
<th><strong>Recommended Change</strong></th>
</tr>
</thead><tbody>
<tr>
<td>Post Shake Min Wait</td>
<td>Time in milliseconds between completing a <code>SHAKE</code> and registering another gesture</td>
<td>Shorter pause between completing <code>SHAKE</code> and registering another gesture</td>
<td>Longer pause between completing <code>SHAKE</code> and registering another gesture</td>
<td>Do not increase the default value of 313 milliseconds</td>
</tr>
<tr>
<td>Post Shake Max Wait</td>
<td>Time in milliseconds that Vulcan will accept a gesture following a <code>SHAKE</code></td>
<td>Shorter total time to register a gesture following a <code>SHAKE</code></td>
<td>Longer total time to register a gesture following a <code>SHAKE</code></td>
<td>Do not increase from default value of 1065 milliseconds</td>
</tr>
</tbody></table>
<h3 id='full-shake-max-time'>Full Shake Max Time</h3>
<p>The Full Shake Max Time setting specifies the maximum amount of time (in milliseconds) a user has to perform a <code>SHAKE</code> - that is, to complete the motion of rotating the wrist and then rotating it back to the start position.</p>

<table><thead>
<tr>
<th><strong>Setting</strong></th>
<th><strong>Description</strong></th>
<th><strong>Impact of Decreasing</strong></th>
<th><strong>Impact of Increasing</strong></th>
<th><strong>Recommended Change</strong></th>
</tr>
</thead><tbody>
<tr>
<td>Full Shake Max Time</td>
<td>Maximum time in milliseconds to perform a <code>SHAKE</code></td>
<td>User must make a faster <code>SHAKE</code> gesture from start to finish, may increase false negatives</td>
<td>User can make a <code>SHAKE</code> gesture slower</td>
<td>Do not increase the default value of 555 milliseconds</td>
</tr>
</tbody></table>
<h3 id='roll-degree-threshold'>Roll Degree Threshold</h3>
<p>The <code>Roll Degree Threshold</code> setting specifies the minimum roll offset (in degrees) that the Vulcan Control Band must cross to register the wrist rotation as a <code>SHAKE</code>. A <code>SHAKE</code> will not register until the user rotates their wrist back to the start position.</p>

<table><thead>
<tr>
<th><strong>Setting</strong></th>
<th><strong>Description</strong></th>
<th><strong>Impact of Decreasing</strong></th>
<th><strong>Impact of Increasing</strong></th>
<th><strong>Recommended Change</strong></th>
</tr>
</thead><tbody>
<tr>
<td>Roll Degree Threshold</td>
<td>Minimum roll offset in degrees required to register a <code>SHAKE</code></td>
<td>Requires a smaller range of motion to register a <code>SHAKE</code> gesture, may increase false positives</td>
<td>Requires a larger range of motion to register a <code>SHAKE</code> gesture, may feel unnatural and/or increase false negatives</td>
<td>Do not increase from default value of 60 degrees</td>
</tr>
</tbody></table>

<p><strong>Important: You should not change any of the other developer settings without first contacting the Pison SDK team to understand how changing them could impact the user experience.</strong></p>
<h3 id='changing-values-in-developer-settings'>Changing Values in Developer Settings</h3>
<p>You can change each setting by moving its associated slider until the app displays the value you want. To return all these settings to system defaults, scroll to the bottom of the page and tap <code>Reset to Defaults</code>.</p>

<p>Keep in mind that the sliders you use to control the developer settings are not locked. When you scroll the page to view more settings, take care not to touch any sliders, as this could lead to accidentally changing a setting.</p>
<h1 id='sdk-library-installation'>SDK Library Installation</h1><h2 id='installation-via-gradle-maven-preferred'>Installation via Gradle/Maven (preferred)</h2><div class="highlight"><pre class="highlight kotlin tab-kotlin--android"><code><span class="c1">// Add our maven repo in your root `build.gradle` file</span>
<span class="nf">repositories</span> <span class="p">{</span>
  <span class="nf">mavenCentral</span><span class="p">()</span>
  <span class="nf">maven</span> <span class="p">{</span> <span class="n">url</span> <span class="s">"https://dl.bintray.com/badoo/maven"</span> <span class="p">}</span>
  <span class="nf">maven</span> <span class="p">{</span> <span class="n">url</span> <span class="p">=</span> <span class="s">"https://kotlin.bintray.com/kotlinx/"</span> <span class="p">}</span>
  <span class="nf">maven</span> <span class="p">{</span>
    <span class="n">name</span> <span class="p">=</span> <span class="s">"GitHubPackages"</span>
    <span class="n">url</span> <span class="p">=</span> <span class="nf">uri</span><span class="p">(</span><span class="s">"https://maven.pkg.github.com/pisontechnology/thanos"</span><span class="p">)</span>
    <span class="nf">credentials</span> <span class="p">{</span>
      <span class="c1">// store credentials in gradle properties</span>
      <span class="n">username</span> <span class="p">=</span> <span class="n">github_username</span> 
      <span class="n">password</span> <span class="p">=</span> <span class="n">github_token</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="c1">// ... any other maven repositories you need</span>
<span class="p">}</span>


<span class="c1">// In your application module's `build.gradle` file</span>
<span class="nf">dependencies</span> <span class="p">{</span>
  <span class="n">implementation</span> <span class="s">"com.pison.core:client-android:1.1.0-99af0c5fde"</span>
<span class="p">}</span>

<span class="c1">// in your gradle.properties file</span>

<span class="n">github_username</span><span class="p">=</span><span class="nc">YourUsername</span>
<span class="n">github_password</span><span class="p">=</span><span class="s">"Your Token"</span>

</code></pre></div><div class="highlight"><pre class="highlight kotlin tab-kotlin--jvm"><code><span class="c1">// Add our maven repo in your root `build.gradle` file</span>
<span class="nf">repositories</span> <span class="p">{</span>
  <span class="nf">mavenCentral</span><span class="p">()</span>
  <span class="nf">maven</span> <span class="p">{</span> <span class="n">url</span> <span class="s">"https://dl.bintray.com/badoo/maven"</span> <span class="p">}</span>
  <span class="nf">maven</span> <span class="p">{</span> <span class="n">url</span> <span class="p">=</span> <span class="s">"https://kotlin.bintray.com/kotlinx/"</span> <span class="p">}</span>
  <span class="nf">maven</span> <span class="p">{</span>
    <span class="n">name</span> <span class="p">=</span> <span class="s">"GitHubPackages"</span>
    <span class="n">url</span> <span class="p">=</span> <span class="nf">uri</span><span class="p">(</span><span class="s">"https://maven.pkg.github.com/pisontechnology/thanos"</span><span class="p">)</span>
    <span class="nf">credentials</span> <span class="p">{</span>
      <span class="c1">// store credentials in gradle properties</span>
      <span class="n">username</span> <span class="p">=</span> <span class="n">github_username</span> 
      <span class="n">password</span> <span class="p">=</span> <span class="n">github_token</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="c1">// ... any other maven repositories you need</span>
<span class="p">}</span>


<span class="c1">// In your application module's `build.gradle` file</span>
<span class="nf">dependencies</span> <span class="p">{</span>
  <span class="n">implementation</span> <span class="s">"com.pison.core:client-jvm:1.1.0-99af0c5fde"</span>
<span class="p">}</span>

<span class="c1">// in your gradle.properties file</span>

<span class="n">github_username</span><span class="p">=</span><span class="nc">YourUsername</span>
<span class="n">github_password</span><span class="p">=</span><span class="s">"Your Token"</span>

</code></pre></div>
<p>All Pison artifacts are currently hosted on <a href="https://maven.pkg.github.com/pisontechnology/thanos">GitHub Packages</a>.</p>

<p>The repository is private, so you&#39;ll need someone from Pison to add you as a collaborator.</p>

<p>After that, you&#39;ll want to create a <a href ="https://docs.github.com/en/github/authenticating-to-github/creating-a-personal-access-token">personal access token</a> and use it in place of the <code>github_password</code> in your root <code>build.gradle</code> file. Make sure you give your token the necessary repository permissions.</p>

<p>Once you have a token, you&#39;ll need to add the repositories hosting the Pison SDK&#39;s dependencies to your gradle project (as shown on the right).</p>
<h3 id='storing-credentials-in-your-local-gradle-properties-file'>Storing credentials in your local gradle properties file</h3>
<p>If you want to store your github username and token in your local gradle properties, use your terminal to navigate to <code>[user root]/.gradle/gradle.properties</code>. If you do not have the <code>gradle.properties</code> file, create it, then add your github username and token. This will automatically pull your credentials from this file. </p>
<h2 id='alternate-installation-via-jar-aar'>Alternate Installation via <code>.jar</code>/<code>.aar</code></h2><div class="highlight"><pre class="highlight kotlin tab-kotlin--android"><code><span class="c1">// in your module's build.gradle</span>
<span class="nf">dependencies</span> <span class="p">{</span>
  <span class="n">implementation</span> <span class="nf">fileTree</span><span class="p">(</span><span class="n">dir</span><span class="p">:</span> <span class="err">'</span><span class="n">libs</span><span class="err">'</span><span class="p">,</span> <span class="n">include</span><span class="p">:</span> <span class="p">[</span><span class="err">'</span><span class="p">*.</span><span class="n">aar</span><span class="err">'</span><span class="p">],</span> <span class="n">exclude</span><span class="p">:</span> <span class="p">[])</span>
<span class="p">}</span>
</code></pre></div>
<p>In the past, we have distributed our SDK as pre-compiled Java archives.  This made it easy to bundle our code, as well as our dependencies, for developers working without Gradle (mostly Unity developers). These files should still work fine in a Gradle environement, though you may run into dependency conflicts if you are trying to pull in any of our bundled dependencies via a Maven repository as well.  If this happens, you can either remove the dependency declaration from your <code>build.gradle</code> (and rely on the one we bundle) or, you can manually unzip the <code>.aar</code>, remove the conflicting <code>.jar</code>, and re-zip the <code>.aar</code>.</p>

<p>To use, simply add our <code>.aar</code> file to the folder called <code>libs</code> inside your application module&#39;s root, then instruct Gradle to look for dependency artifacts inside this folder as demonstrated in the code sample.</p>
<h1 id='reactive-programming'>Reactive Programming</h1><div class="highlight"><pre class="highlight kotlin tab-kotlin--android"><code><span class="k">import</span> <span class="nn">com.badoo.reaktive.observable.*</span>
<span class="k">import</span> <span class="nn">com.badoo.reaktive.scheduler.*</span>

<span class="c1">// Simple reactive example using an interval timer.</span>
<span class="kd">class</span> <span class="nc">MainActivity2</span> <span class="p">:</span> <span class="nc">AppCompatActivity</span><span class="p">()</span> <span class="p">{</span>

  <span class="k">private</span> <span class="k">lateinit</span> <span class="kd">var</span> <span class="py">intervalDisposable</span><span class="p">:</span> <span class="nc">Observable</span><span class="p">&lt;</span><span class="nc">Long</span><span class="p">&gt;</span>

  <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="nc">Bundle</span><span class="p">?)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">.</span><span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">)</span>
    <span class="c1">// ... Activity setup ...</span>
    <span class="kd">val</span> <span class="py">intervalPeriodMilliseconds</span> <span class="p">=</span> <span class="mi">2000L</span>
    <span class="kd">val</span> <span class="py">backgroundScheduler</span><span class="p">:</span> <span class="nc">Scheduler</span> <span class="p">=</span> <span class="n">ioScheduler</span>
    <span class="c1">// Creates an observable that emits a Long every 2000 milliseconds. </span>
    <span class="c1">// The scheduler tells the observable "where" to execute.</span>
    <span class="kd">val</span> <span class="py">intervalObservable</span><span class="p">:</span> <span class="nc">Observable</span><span class="p">&lt;</span><span class="nc">Long</span><span class="p">&gt;</span> <span class="p">=</span> <span class="nf">observableInterval</span><span class="p">(</span><span class="n">intervalPeriodMilliseconds</span><span class="p">,</span><span class="n">backgroundScheduler</span><span class="p">)</span>
    <span class="n">intervalDisposable</span> <span class="p">=</span> <span class="n">intervalObservable</span><span class="p">.</span><span class="nf">subscribe</span><span class="p">(</span><span class="n">onNext</span> <span class="p">=</span> <span class="p">{</span> <span class="n">intervalCount</span> <span class="p">-&gt;</span>
      <span class="nf">println</span><span class="p">(</span><span class="s">"Interval $intervalCount has passed."</span><span class="p">)</span>
    <span class="p">},</span> <span class="n">onError</span> <span class="p">=</span> <span class="p">{</span> <span class="n">throwable</span> <span class="p">-&gt;</span>
      <span class="nf">println</span><span class="p">(</span><span class="s">"An error has occurred: $throwable"</span><span class="p">)</span>
    <span class="p">})</span>
  <span class="p">}</span>

  <span class="k">override</span> <span class="k">fun</span> <span class="nf">onDestroy</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">.</span><span class="nf">onDestroy</span><span class="p">()</span>
    <span class="c1">// Always disconnect from the observable at the end of appropriate lifecycle!</span>
    <span class="c1">// The onNext and onError callbacks will not be called after this point.</span>
    <span class="n">intervalDisposable</span><span class="p">.</span><span class="nf">dispose</span><span class="p">()</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight kotlin tab-kotlin--jvm"><code><span class="k">import</span> <span class="nn">com.badoo.reaktive.observable.*</span>
<span class="k">import</span> <span class="nn">com.badoo.reaktive.scheduler.*</span>

<span class="c1">// Simple reactive example using an interval timer.</span>
<span class="k">fun</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">val</span> <span class="py">intervalPeriodMilliseconds</span> <span class="p">=</span> <span class="mi">2000L</span>
  <span class="kd">val</span> <span class="py">backgroundScheduler</span><span class="p">:</span> <span class="nc">Scheduler</span> <span class="p">=</span> <span class="n">ioScheduler</span>

  <span class="c1">// Creates an observable that emits a Long every 2000 milliseconds. </span>
  <span class="c1">// The scheduler tells the observable "where" to execute.</span>
  <span class="kd">val</span> <span class="py">intervalObservable</span><span class="p">:</span> <span class="nc">Observable</span><span class="p">&lt;</span><span class="nc">Long</span><span class="p">&gt;</span> <span class="p">=</span> <span class="nf">observableInterval</span><span class="p">(</span><span class="n">intervalPeriodMilliseconds</span><span class="p">,</span> <span class="n">backgroundScheduler</span><span class="p">)</span>
  <span class="kd">val</span> <span class="py">intervalDisposable</span> <span class="p">=</span> <span class="n">intervalObservable</span><span class="p">.</span><span class="nf">subscribe</span><span class="p">(</span><span class="n">onNext</span> <span class="p">=</span> <span class="p">{</span> <span class="n">intervalCount</span> <span class="p">-&gt;</span>
    <span class="c1">// this callback is invoked whenever the observable has new data to consume</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"Interval $intervalCount has passed."</span><span class="p">)</span>
  <span class="p">},</span> <span class="n">onError</span> <span class="p">=</span> <span class="p">{</span><span class="n">throwable</span> <span class="p">-&gt;</span>
    <span class="c1">// this callback is invoked if an exception is thrown during the observable's internal execution.</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"An error has occurred: $throwable"</span><span class="p">)</span>
  <span class="p">})</span>

  <span class="k">while</span> <span class="p">(</span><span class="k">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nf">readLine</span><span class="p">()</span> <span class="p">==</span> <span class="s">"exit"</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">break</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="c1">// Disconnect from the observable. Neither callback can be invoked after this point.</span>
  <span class="n">intervalDisposable</span><span class="p">.</span><span class="nf">dispose</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>
<p>The Pison SDK exposes <code>Reactive</code> endpoints to developers. If you are new to Reactive programming, fear not! You&#39;ll only need the bare essentials.</p>

<p>Many of our APIs return objects of the type <code>Observable&lt;TypeParam&gt;</code>.
An <code>Observable</code> is simply an asynchronous stream of data. The type parameter associated with the <code>Observable</code> indicates how the data will be presented. So we say an <code>Observable&lt;TypeParam&gt;</code> <em>emits</em> instances of <code>TypeParam</code>.</p>

<p>To consume this data, you must provide the observable with: </p>

<ol>
<li>A callback function to be invoked whenever a new piece of data is available. This is referred to as the <code>onNext</code> function.</li>
<li>A callback function to be invoked in the case of an error. This is referred to as the <code>onError</code> function.</li>
</ol>

<p>When you are ready to start consuming from an <code>Observable</code>, you must pass your callbacks as parameters to one of its <code>subscribe</code> methods. </p>

<p>When you subscribe to an <code>Observable</code>, the Reactive framework will return a <code>Disposable</code>. When you are ready to <em>stop</em> consuming data, you must call the <code>Disposable</code>&#39;s <code>dispose()</code> method.</p>

<p>Check out the code examples for a simple, fully-functional demo.</p>

<p>If you&#39;d like to learn more about Reactive programming in general, we recommend <a href="https://gist.github.com/staltz/868e7e9bc2a7b8c1f754">this introduction.</a></p>

<p>The Pison SDK is currently leveraging the <a href="https://github.com/badoo/Reaktive">Reaktive</a> library under the hood. </p>
<h1 id='creating-a-39-pisonsdk-39-instance'>Creating a &#39;PisonSdk&#39; instance</h1><div class="highlight"><pre class="highlight kotlin tab-kotlin--android"><code><span class="k">import</span> <span class="nn">com.pison.core.client.newPisonSdkInstance</span>

<span class="c1">// ...</span>
<span class="c1">// Android factory method requires a Context instance</span>
<span class="kd">val</span> <span class="py">pisonSdk</span> <span class="p">=</span> <span class="nf">newPisonSdkInstance</span><span class="p">(</span><span class="n">applicationContext</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight kotlin tab-kotlin--jvm"><code><span class="k">import</span> <span class="nn">com.pison.core.client.newPisonSdkInstance</span>

<span class="c1">// ...</span>
<span class="kd">val</span> <span class="py">pisonSdk</span> <span class="p">=</span> <span class="nf">newPisonSdkInstance</span><span class="p">()</span>
</code></pre></div>
<p>All access to Pison data begins with the <code>PisonSdk</code> interface.</p>

<p>To produce an instance, use our factory function: </p>

<p><code>com.pison.core.client.newPisonSdkInstance</code></p>
<h1 id='connecting-to-the-server'>Connecting to the server</h1>
<p><em>Reminder: Please ensure that you have the Pison Server installed and running.</em></p>

<p>The Pison Server will provide your application with all real-time, Pison-related data. There are 3 ways to connect to it:</p>
<h2 id='1-local-pison-server'>1. Local Pison Server</h2><div class="highlight"><pre class="highlight kotlin tab-kotlin--android"><code><span class="k">import</span> <span class="nn">com.pison.core.client.*</span>

<span class="kd">val</span> <span class="py">pisonSdk</span><span class="p">:</span> <span class="nc">PisonSdk</span> <span class="p">=</span> <span class="nf">newPisonSdkInstance</span><span class="p">(</span><span class="n">applicationContext</span><span class="p">)</span>
<span class="kd">val</span> <span class="py">remoteServer</span><span class="p">:</span> <span class="nc">PisonRemoteServer</span> <span class="p">=</span> <span class="n">pisonSdk</span><span class="p">.</span><span class="nf">bindToLocalServer</span><span class="p">()</span>
</code></pre></div><div class="highlight"><pre class="highlight kotlin tab-kotlin--jvm"><code><span class="k">import</span> <span class="nn">com.pison.core.client.*</span>

<span class="kd">val</span> <span class="py">pisonSdk</span><span class="p">:</span> <span class="nc">PisonSdk</span> <span class="p">=</span> <span class="nf">newPisonSdkInstance</span><span class="p">()</span>
<span class="kd">val</span> <span class="py">remoteServer</span><span class="p">:</span> <span class="nc">PisonRemoteServer</span> <span class="p">=</span> <span class="n">pisonSdk</span><span class="p">.</span><span class="nf">bindToLocalServer</span><span class="p">()</span>
</code></pre></div>
<p>If your application runs on the same hardware as the Pison Server, this is the quickest/simplest option.
Use the <code>PisonSdk</code>&#39;s extension function:</p>

<p><code>com.pison.core.client.bindToLocalServer</code></p>

<p>This function returns an instance of <code>PisonRemoteServer</code>, which is documented in following sections.</p>

<p>Note that the actual &quot;binding&quot; happens lazily, so this call will not fail immediately if the server is not available.</p>
<h2 id='2-named-pison-server'>2. Named Pison Server</h2><div class="highlight"><pre class="highlight kotlin tab-kotlin--android"><code><span class="k">import</span> <span class="nn">com.pison.core.client.*</span>
<span class="k">import</span> <span class="nn">com.pison.core.shared.DEFAULT_PISON_PORT</span>

<span class="kd">val</span> <span class="py">pisonSdk</span><span class="p">:</span> <span class="nc">PisonSdk</span> <span class="p">=</span> <span class="nf">newPisonSdkInstance</span><span class="p">(</span><span class="n">applicationContext</span><span class="p">)</span>
<span class="c1">// This could also be an IP address encoded as a string, like "192.168.1.24"</span>
<span class="kd">val</span> <span class="py">serverLocation</span> <span class="p">=</span> <span class="s">"Android.local"</span>
<span class="kd">val</span> <span class="py">remoteServer</span><span class="p">:</span> <span class="nc">PisonRemoteServer</span> <span class="p">=</span> <span class="n">pisonSdk</span><span class="p">.</span><span class="nf">bindToServer</span><span class="p">(</span><span class="n">hostAddress</span> <span class="p">=</span> <span class="n">serverLocation</span><span class="p">,</span> <span class="n">port</span> <span class="p">=</span> <span class="nc">DEFAULT_PISON_PORT</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight kotlin tab-kotlin--jvm"><code><span class="k">import</span> <span class="nn">com.pison.core.client.*</span>
<span class="k">import</span> <span class="nn">com.pison.core.shared.DEFAULT_PISON_PORT</span>

<span class="kd">val</span> <span class="py">pisonSdk</span><span class="p">:</span> <span class="nc">PisonSdk</span> <span class="p">=</span> <span class="nf">newPisonSdkInstance</span><span class="p">()</span>
<span class="c1">// This could also be an IP address encoded as a string, like "192.168.1.24"</span>
<span class="kd">val</span> <span class="py">serverLocation</span> <span class="p">=</span> <span class="s">"JVM.local"</span>
<span class="kd">val</span> <span class="py">remoteServer</span><span class="p">:</span> <span class="nc">PisonRemoteServer</span> <span class="p">=</span> <span class="n">pisonSdk</span><span class="p">.</span><span class="nf">bindToServer</span><span class="p">(</span><span class="n">hostAddress</span> <span class="p">=</span> <span class="n">serverLocation</span><span class="p">,</span> <span class="n">port</span> <span class="p">=</span> <span class="nc">DEFAULT_PISON_PORT</span><span class="p">)</span>
</code></pre></div>
<p>If your application runs on a different machine than the Pison Server, you can point directly to it by providing a hostname (or IP address) and a port number. Both machines <em>must</em> be on the same network for this to work! </p>

<p>For this approach, use the <code>PisonSdk</code>&#39;s <code>bindToServer</code> method.</p>

<blockquote>
<p>NOTE: Most builds of the Pison Server are currently configured to run by default on the port number defined by <code>com.pison.core.shared.DEFAULT_PISON_PORT</code>. This may not always be the case!</p>

<p>NOTE: The actual &quot;binding&quot; happens lazily, so this call will not fail immediately if the server is not available.</p>
</blockquote>
<h2 id='3-automatic-service-discovery-experimental'>3. Automatic Service Discovery (Experimental)</h2>
<blockquote>
<p>Example demonstrating how to automatically bind the the first Pison Server discovered on a network.</p>
</blockquote>
<div class="highlight"><pre class="highlight kotlin tab-kotlin--android"><code>
<span class="c1">// be sure to dispose of both of these during an appropriate Android lifecycle event</span>
<span class="k">lateinit</span> <span class="kd">var</span> <span class="py">browseDisposable</span><span class="p">:</span> <span class="nc">Disposable</span>
<span class="k">lateinit</span> <span class="kd">var</span> <span class="py">bindDisposable</span><span class="p">:</span> <span class="nc">Disposable</span>

<span class="kd">val</span> <span class="py">pisonSdk</span> <span class="p">=</span> <span class="nf">newPisonSdkInstance</span><span class="p">(</span><span class="n">applicationContext</span><span class="p">)</span>
<span class="n">browseDisposable</span> <span class="p">=</span> <span class="n">pisonSdk</span>
  <span class="p">.</span><span class="nf">browseForPisonServers</span><span class="p">()</span>
  <span class="p">.</span><span class="nf">subscribe</span><span class="p">(</span><span class="n">onNext</span> <span class="p">=</span> <span class="p">{</span> <span class="n">pisonAdvertisementList</span> <span class="p">-&gt;</span>
    <span class="c1">// bind to the first server we find</span>
    <span class="n">pisonAdvertisementList</span><span class="p">.</span><span class="nf">firstOrNull</span><span class="p">()</span><span class="o">?.</span><span class="nf">let</span> <span class="p">{</span>
        <span class="nf">bindToServer</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="n">onError</span> <span class="p">=</span> <span class="p">{</span> <span class="n">throwable</span> <span class="p">-&gt;</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"Error browsing for servers: $throwable"</span><span class="p">)</span>
  <span class="p">})</span>

<span class="k">fun</span> <span class="nf">bindToServer</span><span class="p">(</span><span class="n">advertisement</span><span class="p">:</span> <span class="nc">PisonServerAdvertisement</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// stop browsing as soon as we find a server to bind to</span>
  <span class="n">browseDisposable</span><span class="p">.</span><span class="nf">dispose</span><span class="p">()</span>
  <span class="n">bindDisposable</span> <span class="p">=</span> <span class="n">advertisement</span><span class="p">.</span><span class="nf">bind</span><span class="p">().</span><span class="nf">subscribe</span><span class="p">(</span><span class="n">onSuccess</span> <span class="p">=</span> <span class="p">{</span> <span class="n">server</span> <span class="p">-&gt;</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"bound to server: ${server.name}"</span><span class="p">)</span>
  <span class="p">},</span> <span class="n">onError</span> <span class="p">=</span> <span class="p">{</span> <span class="n">throwable</span> <span class="p">-&gt;</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"error binding to server $throwable"</span><span class="p">)</span>
  <span class="p">})</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight kotlin tab-kotlin--jvm"><code>
<span class="k">lateinit</span> <span class="kd">var</span> <span class="py">browseDisposable</span><span class="p">:</span> <span class="nc">Disposable</span>
<span class="k">lateinit</span> <span class="kd">var</span> <span class="py">bindDisposable</span><span class="p">:</span> <span class="nc">Disposable</span>

<span class="kd">val</span> <span class="py">pisonSdk</span> <span class="p">=</span> <span class="nf">newPisonSdkInstance</span><span class="p">()</span>
<span class="n">browseDisposable</span> <span class="p">=</span> <span class="n">pisonSdk</span>
  <span class="p">.</span><span class="nf">browseForPisonServers</span><span class="p">()</span>
  <span class="p">.</span><span class="nf">subscribe</span><span class="p">(</span><span class="n">onNext</span> <span class="p">=</span> <span class="p">{</span> <span class="n">pisonAdvertisementList</span> <span class="p">-&gt;</span>
    <span class="c1">// bind to the first server we find</span>
    <span class="n">pisonAdvertisementList</span><span class="p">.</span><span class="nf">firstOrNull</span><span class="p">()</span><span class="o">?.</span><span class="nf">let</span> <span class="p">{</span>
        <span class="nf">bindToServer</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="n">onError</span> <span class="p">=</span> <span class="p">{</span> <span class="n">throwable</span> <span class="p">-&gt;</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"Error browsing for servers: $throwable"</span><span class="p">)</span>
  <span class="p">})</span>

<span class="k">fun</span> <span class="nf">bindToServer</span><span class="p">(</span><span class="n">advertisement</span><span class="p">:</span> <span class="nc">PisonServerAdvertisement</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// stop browsing as soon as we find a server to bind to</span>
  <span class="n">browseDisposable</span><span class="p">.</span><span class="nf">dispose</span><span class="p">()</span>
  <span class="n">bindDisposable</span> <span class="p">=</span> <span class="n">advertisement</span><span class="p">.</span><span class="nf">bind</span><span class="p">().</span><span class="nf">subscribe</span><span class="p">(</span><span class="n">onSuccess</span> <span class="p">=</span> <span class="p">{</span> <span class="n">server</span> <span class="p">-&gt;</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"bound to server: ${server.name}"</span><span class="p">)</span>
  <span class="p">},</span> <span class="n">onError</span> <span class="p">=</span> <span class="p">{</span> <span class="n">throwable</span> <span class="p">-&gt;</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"error binding to server $throwable"</span><span class="p">)</span>
  <span class="p">})</span>
<span class="p">}</span>
</code></pre></div>
<p>It is possible to automatically discover Pison Servers running on your network.</p>

<p>Use the <code>PisonSdk</code>&#39;s <code>browseForPisonServers()</code> method to get an <code>Observable</code> of <code>PisonAdvertisement</code>s. 
When you susbscribe to this Observable, you will periodically receive a <code>List</code> of the currently &quot;visible&quot; Pison Servers on your network. The list provided is always as up-to-date as possible - if a server becomes available or disappears, your <code>onNext</code> callback will be invoked with an entirely new list.</p>

<p>Each <code>PisonAdvertisement</code> has a <code>transport</code> field of type <code>PisonServerTransport</code>. This determines <em>how</em> a given server expects to be communicated with. In a large majority of cases, this should not matter to you as an application developer, so you can simply use the advertisement&#39;s <code>bind</code> extension function to access that server. Note that <code>PisonServerAdvertisement.bind()</code> returns an instance of <code>Single&lt;PisonRemoteServer&gt;</code>. A <code>Single</code> is a special type of Reactive <code>Observable</code> that promises to only emit a single item. So to access the <code>PisonRemoteServer</code>, you must subscribe to the <code>Single</code>.</p>

<blockquote>
<p>Here&#39;s a consolidated version of the same example, using built-in Reactive extensions.</p>
</blockquote>
<div class="highlight"><pre class="highlight kotlin tab-kotlin--android"><code><span class="kd">val</span> <span class="py">pisonSdk</span> <span class="p">=</span> <span class="nf">newPisonSdkInstance</span><span class="p">(</span><span class="n">applicationContext</span><span class="p">)</span>
<span class="kd">val</span> <span class="py">browseDisposable</span> <span class="p">=</span> <span class="n">pisonSdk</span>
  <span class="p">.</span><span class="nf">browseForPisonServers</span><span class="p">()</span>
  <span class="c1">// only forward non-empty lists</span>
  <span class="p">.</span><span class="nf">filter</span> <span class="p">{</span> <span class="n">it</span><span class="p">.</span><span class="nf">isNotEmpty</span><span class="p">()</span> <span class="p">}</span>
  <span class="c1">// only forward the first item from each list.</span>
  <span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="n">it</span><span class="p">.</span><span class="nf">first</span><span class="p">()</span> <span class="p">}</span>
  <span class="c1">// only forward the first emitted advertisement.</span>
  <span class="p">.</span><span class="nf">firstOrComplete</span><span class="p">()</span>
  <span class="c1">// automatically bind to that advertisement.</span>
  <span class="p">.</span><span class="nf">flatMapSingle</span> <span class="p">{</span> <span class="n">it</span><span class="p">.</span><span class="nf">bind</span><span class="p">()</span> <span class="p">}</span>
  <span class="p">.</span><span class="nf">subscribe</span><span class="p">(</span><span class="n">onSuccess</span> <span class="p">=</span> <span class="p">{</span> <span class="n">server</span> <span class="p">-&gt;</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"bound to server: ${server.name}"</span><span class="p">)</span>
    <span class="c1">// implement this yourself!</span>
    <span class="nf">onServerBound</span><span class="p">(</span><span class="n">server</span><span class="p">)</span>
  <span class="p">},</span> <span class="n">onError</span> <span class="p">=</span> <span class="p">{</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"error binding to server $throwable"</span><span class="p">)</span>
  <span class="p">})</span>
</code></pre></div><div class="highlight"><pre class="highlight kotlin tab-kotlin--jvm"><code><span class="kd">val</span> <span class="py">pisonSdk</span> <span class="p">=</span> <span class="nf">newPisonSdkInstance</span><span class="p">()</span>
<span class="kd">val</span> <span class="py">browseDisposable</span> <span class="p">=</span> <span class="n">pisonSdk</span>
  <span class="p">.</span><span class="nf">browseForPisonServers</span><span class="p">()</span>
  <span class="c1">// only forward non-empty lists</span>
  <span class="p">.</span><span class="nf">filter</span> <span class="p">{</span> <span class="n">it</span><span class="p">.</span><span class="nf">isNotEmpty</span><span class="p">()</span> <span class="p">}</span>
  <span class="c1">// only forward the first item from each list.</span>
  <span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="n">it</span><span class="p">.</span><span class="nf">first</span><span class="p">()</span> <span class="p">}</span>
  <span class="c1">// only forward the first emitted advertisement.</span>
  <span class="p">.</span><span class="nf">firstOrComplete</span><span class="p">()</span>
  <span class="c1">// automatically bind to that advertisement.</span>
  <span class="p">.</span><span class="nf">flatMapSingle</span> <span class="p">{</span> <span class="n">it</span><span class="p">.</span><span class="nf">bind</span><span class="p">()</span> <span class="p">}</span>
  <span class="p">.</span><span class="nf">subscribe</span><span class="p">(</span><span class="n">onSuccess</span> <span class="p">=</span> <span class="p">{</span> <span class="n">server</span> <span class="p">-&gt;</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"bound to server: ${server.name}"</span><span class="p">)</span>
    <span class="c1">// implement this yourself!</span>
    <span class="nf">onServerBound</span><span class="p">(</span><span class="n">server</span><span class="p">)</span>
  <span class="p">},</span> <span class="n">onError</span> <span class="p">=</span> <span class="p">{</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"error binding to server $throwable"</span><span class="p">)</span>
  <span class="p">})</span>
</code></pre></div><h1 id='monitoring-pison-devices'>Monitoring Pison Devices</h1><div class="highlight"><pre class="highlight kotlin tab-kotlin--android"><code><span class="c1">// ...</span>
<span class="kd">var</span> <span class="py">connectionsDisposable</span><span class="p">:</span> <span class="nc">Disposable</span><span class="p">?</span>

<span class="k">fun</span> <span class="nf">onServerBound</span><span class="p">(</span><span class="n">server</span><span class="p">:</span> <span class="nc">PisonRemoteServer</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// cancel any existing subscriptions</span>
  <span class="n">connectionsDisposable</span><span class="o">?.</span><span class="nf">dispose</span><span class="p">()</span>
  <span class="n">connectionsDisposable</span> <span class="p">=</span> <span class="n">it</span><span class="p">.</span><span class="nf">monitorConnections</span><span class="p">().</span><span class="nf">subscribe</span><span class="p">(</span><span class="n">onNext</span> <span class="p">=</span> <span class="p">{</span>
    <span class="k">when</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">is</span> <span class="nc">ConnectedDeviceUpdate</span> <span class="p">-&gt;</span> <span class="p">{</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"Pison device connected: ${it.connectedDevice.deviceName}"</span><span class="p">)</span>
        <span class="c1">// impement this yourself!</span>
        <span class="nf">onDeviceConnected</span><span class="p">(</span><span class="n">it</span><span class="p">.</span><span class="n">connectedDevice</span><span class="p">)</span>
      <span class="p">}</span>
      <span class="nc">DisconnectedDeviceUpdate</span> <span class="p">-&gt;</span> <span class="nf">println</span><span class="p">(</span><span class="s">"Pison device disconnected!"</span><span class="p">)</span>
      <span class="k">is</span> <span class="nc">ConnectedFailedUpdate</span> <span class="p">-&gt;</span> <span class="nf">println</span><span class="p">(</span><span class="s">"Error connecting to Pison Device: ${it.reason}"</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="n">onError</span> <span class="p">=</span> <span class="p">{</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"error while monitoring connections: $it"</span><span class="p">)</span>
  <span class="p">})</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight kotlin tab-kotlin--jvm"><code><span class="c1">// ...</span>
<span class="kd">var</span> <span class="py">connectionsDisposable</span><span class="p">:</span> <span class="nc">Disposable</span><span class="p">?</span>

<span class="k">fun</span> <span class="nf">onServerBound</span><span class="p">(</span><span class="n">server</span><span class="p">:</span> <span class="nc">PisonRemoteServer</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// cancel any existing subscriptions</span>
  <span class="n">connectionsDisposable</span><span class="o">?.</span><span class="nf">dispose</span><span class="p">()</span>
  <span class="n">connectionsDisposable</span> <span class="p">=</span> <span class="n">it</span><span class="p">.</span><span class="nf">monitorConnections</span><span class="p">().</span><span class="nf">subscribe</span><span class="p">(</span><span class="n">onNext</span> <span class="p">=</span> <span class="p">{</span>
    <span class="k">when</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">is</span> <span class="nc">ConnectedDeviceUpdate</span> <span class="p">-&gt;</span> <span class="p">{</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"Pison device connected: ${it.connectedDevice.deviceName}"</span><span class="p">)</span>
        <span class="c1">// impement this yourself!</span>
        <span class="nf">onDeviceConnected</span><span class="p">(</span><span class="n">server</span><span class="p">,</span> <span class="n">it</span><span class="p">.</span><span class="n">connectedDevice</span><span class="p">)</span>
      <span class="p">}</span>
      <span class="nc">DisconnectedDeviceUpdate</span> <span class="p">-&gt;</span> <span class="nf">println</span><span class="p">(</span><span class="s">"Pison device disconnected!"</span><span class="p">)</span>
      <span class="k">is</span> <span class="nc">ConnectedFailedUpdate</span> <span class="p">-&gt;</span> <span class="nf">println</span><span class="p">(</span><span class="s">"Error connecting to Pison Device: ${it.reason}"</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="n">onError</span> <span class="p">=</span> <span class="p">{</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"error while monitoring connections: $it"</span><span class="p">)</span>
  <span class="p">})</span>
<span class="p">}</span>
</code></pre></div>
<p>Once you are &quot;bound&quot; to a Pison Server, you can request to be updated about connections to Pison hardware. </p>

<p>To do this, use the <code>PisonRemoveServer</code>interface&#39;s <code>monitorConnections()</code> method. This will return an <code>Observable&lt;ConnectionUpdate&gt;</code>, which emits each time a Pison Device connects to or disconnects from the server.</p>

<p><code>ConnectionUpdate</code> is a sealed class, so you may need to check its type before getting all the data you need.</p>
<h1 id='real-time-device-data'>Real-Time Device Data</h1><div class="highlight"><pre class="highlight kotlin tab-kotlin--android"><code><span class="c1">// ...</span>
<span class="kd">var</span> <span class="py">deviceMonitorDisposable</span><span class="p">:</span> <span class="nc">Disposable</span><span class="p">?</span>
<span class="kd">var</span> <span class="py">dataDisposable</span><span class="p">:</span> <span class="nc">Disposable</span><span class="p">?</span>
<span class="k">fun</span> <span class="nf">onDeviceConnected</span><span class="p">(</span><span class="n">server</span><span class="p">:</span> <span class="nc">PisonRemoteServer</span><span class="p">,</span> <span class="n">connectedDevice</span><span class="p">:</span> <span class="nc">ConnectedDevice</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">deviceMonitorDisposable</span><span class="o">?.</span><span class="nf">dispose</span><span class="p">()</span>
  <span class="n">deviceMonitorDisposable</span> <span class="p">=</span> <span class="n">server</span><span class="p">.</span><span class="nf">monitorDevice</span><span class="p">(</span><span class="n">connectedDevice</span><span class="p">).</span><span class="nf">subscribe</span><span class="p">(</span><span class="n">onNext</span> <span class="p">=</span> <span class="p">{</span> <span class="n">remoteDevice</span> <span class="p">-&gt;</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"monitoring device: ${remoteDevice.deviceId}"</span><span class="p">)</span>
    <span class="nf">onMonitoringDevice</span><span class="p">(</span><span class="n">remoteDevice</span><span class="p">)</span>
  <span class="p">},</span> <span class="n">onError</span> <span class="p">=</span> <span class="p">{</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"device ${connectedDevice.deviceName} has disconnected!"</span><span class="p">)</span>
  <span class="p">})</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">onMonitoringDevice</span><span class="p">(</span><span class="n">remoteDevice</span><span class="p">:</span> <span class="nc">PisonRemoteClassifiedDevice</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">dataDisposable</span><span class="o">?.</span><span class="nf">dispose</span><span class="p">()</span>
  <span class="c1">// CompositeDisposable can group a bunch of disposables together</span>
  <span class="n">dataDisposable</span> <span class="p">=</span> <span class="nc">CompositeDisposable</span><span class="p">()</span>
  <span class="n">remoteDevice</span><span class="p">.</span><span class="nf">monitorGestures</span><span class="p">().</span><span class="nf">subscribe</span> <span class="p">{</span> <span class="n">gesture</span> <span class="p">-&gt;</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"user has performed gesture: $gesture"</span><span class="p">)</span>
  <span class="p">}.</span><span class="nf">also</span> <span class="p">{</span> <span class="n">dataDisposable</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="p">}</span>

  <span class="n">remoteDevice</span><span class="p">.</span><span class="nf">monitorDeviceState</span><span class="p">().</span><span class="nf">subscribe</span> <span class="p">{</span> <span class="n">deviceState</span> <span class="p">-&gt;</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"device battery life: ${deviceState.battery}%"</span><span class="p">)</span>
  <span class="p">}.</span><span class="nf">also</span> <span class="p">{</span> <span class="n">dataDisposable</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="p">}</span>

  <span class="c1">// remoteDevice.monitorEulerAngles()</span>
  <span class="c1">// remoteDevice.monitorActivationStates()</span>
  <span class="c1">// remoteDevice.monitorQuaternion()</span>
  <span class="c1">// remoteDevice.monitorLockState()</span>
  <span class="c1">// ... see full example below for usage of each of these.</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight kotlin tab-kotlin--jvm"><code><span class="c1">// ...</span>
<span class="kd">var</span> <span class="py">deviceMonitorDisposable</span><span class="p">:</span> <span class="nc">Disposable</span><span class="p">?</span>
<span class="kd">var</span> <span class="py">dataDisposable</span><span class="p">:</span> <span class="nc">Disposable</span><span class="p">?</span>
<span class="k">fun</span> <span class="nf">onDeviceConnected</span><span class="p">(</span><span class="n">server</span><span class="p">:</span> <span class="nc">PisonRemoteServer</span><span class="p">,</span> <span class="n">connectedDevice</span><span class="p">:</span> <span class="nc">ConnectedDevice</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">deviceMonitorDisposable</span><span class="o">?.</span><span class="nf">dispose</span><span class="p">()</span>
  <span class="n">deviceMonitorDisposable</span> <span class="p">=</span> <span class="n">server</span><span class="p">.</span><span class="nf">monitorDevice</span><span class="p">(</span><span class="n">connectedDevice</span><span class="p">).</span><span class="nf">subscribe</span><span class="p">(</span><span class="n">onNext</span> <span class="p">=</span> <span class="p">{</span> <span class="n">remoteDevice</span> <span class="p">-&gt;</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"monitoring device: ${remoteDevice.deviceId}"</span><span class="p">)</span>
    <span class="nf">onMonitoringDevice</span><span class="p">(</span><span class="n">remoteDevice</span><span class="p">)</span>
  <span class="p">},</span> <span class="n">onError</span> <span class="p">=</span> <span class="p">{</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"device ${connectedDevice.deviceName} has disconnected!"</span><span class="p">)</span>
  <span class="p">})</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">onMonitoringDevice</span><span class="p">(</span><span class="n">remoteDevice</span><span class="p">:</span> <span class="nc">PisonRemoteClassifiedDevice</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">dataDisposable</span><span class="o">?.</span><span class="nf">dispose</span><span class="p">()</span>
  <span class="c1">// CompositeDisposable can group a bunch of disposables together</span>
  <span class="n">dataDisposable</span> <span class="p">=</span> <span class="nc">CompositeDisposable</span><span class="p">()</span>
  <span class="n">remoteDevice</span><span class="p">.</span><span class="nf">monitorGestures</span><span class="p">().</span><span class="nf">subscribe</span> <span class="p">{</span> <span class="n">gesture</span> <span class="p">-&gt;</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"user has performed gesture: $gesture"</span><span class="p">)</span>
  <span class="p">}.</span><span class="nf">also</span> <span class="p">{</span> <span class="n">dataDisposable</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="p">}</span>

  <span class="n">remoteDevice</span><span class="p">.</span><span class="nf">monitorDeviceState</span><span class="p">().</span><span class="nf">subscribe</span> <span class="p">{</span> <span class="n">deviceState</span> <span class="p">-&gt;</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"device battery life: ${deviceState.battery}%"</span><span class="p">)</span>
  <span class="p">}.</span><span class="nf">also</span> <span class="p">{</span> <span class="n">dataDisposable</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="p">}</span>

  <span class="c1">// remoteDevice.monitorEulerAngles()</span>
  <span class="c1">// remoteDevice.monitorActivationStates()</span>
  <span class="c1">// remoteDevice.monitorQuaternion()</span>
  <span class="c1">// remoteDevice.monitorLockState()</span>
  <span class="c1">// ... see full example below for usage of each of these.</span>
<span class="p">}</span>
</code></pre></div>
<p>Once you know a Pison Device has connected to the server, you can request real-time updates from that device. </p>

<p>Use <code>PisonRemoteServer</code>&#39;s <code>monitorDevice</code> method to request updates from a specific device. </p>

<p>The <code>monitorDevice</code> method returns an <code>Observable&lt;PisonRemoteClassifiedDevice&gt;</code>. When you subscribe to this <code>Observable</code>, the server validates the <code>ConnectedDevice</code> that you&#39;ve passed as a parameter and a <code>PisonRemoteClassifiedDevice</code> is emitted (assuming the Pison Device is still connected).</p>

<p>The <code>PisonRemoteClassifiedDevice</code> interface provides an <code>Observable</code> for each of the data streams available from the Pison device/server. The data streams fall into 1 of 3 categories:</p>
<h3 id='1-user-state'>1. User State</h3>
<ul>
<li><p><code>Activation States</code> - information about what the user is likely doing with their hand. These data points are all inferred by Pison&#39;s classification algorithms.</p></li>
<li><p><code>Euler Angles / Quaternion</code> - information about where the user has their arm positioned.</p></li>
</ul>
<h3 id='2-device-state'>2. Device State</h3>
<ul>
<li><code>Imu</code> - Latest readings from the Vulcan Control Band&#39;s gyroscope, accelerometer, and magnetometer. These readings include accuracy information in the form of 2 variables: <code>Accuracy</code> and <code>Status</code>.

<ul>
<li><code>Accuracy</code> is a float that indicates the estimated accuracy to a few degrees.</li>
<li><code>Status</code> is an integer that will be from 0-3. 

<ul>
<li><code>0</code> is an accuracy of over 60 degrees. </li>
<li><code>1</code> is an accuracy of 45 to 60 degrees. </li>
<li><code>2</code> is an accuracy of 16 to 45 degrees. </li>
<li><code>3</code> is most accurate with a reading less than 8 degrees. </li>
</ul></li>
</ul></li>
</ul>

<p><code>NOTE:</code>Between 8 to 16 deg will be either 3 or 2 depending on the previous value.</p>

<p>The IMU reported status will degrade over time naturally. In order to improve accuracy, the user simply needs to move the Vulcan Control Band in 3-dimensional space. It is recommended to have the user move the Vulcan Control Band in a figure 8 motion for a few moments.     </p>

<ul>
<li><p><code>Device Meta</code> - Information about the Vulcan Control Band itself and its connection to the server, battery life, RSSI, etc.</p></li>
<li><p><code>Lock State</code> -  Indicates whether or not the Vulcan Control Band is considered &quot;locked&quot;. A &quot;locked&quot; device will not identify or issue gesture events but will still report IMU data. Applications may choose to ignore the real-time IMU data while this is true.</p></li>
</ul>
<h3 id='3-events'>3. Events</h3>
<ul>
<li><code>Gesture</code> - Events emitted when Pison&#39;s classification algorithms have determined that user performed a specific gesture. </li>
</ul>
<h1 id='haptics'>Haptics</h1>
<p>Haptic technology is a type of technology that allows users to feel tactile feedback through their skin. The technology can be used to provide users with various types of feedback, such as notifications, alerts, and even virtual touches or textures. Haptic feedback can be an important aspect of the user experience in many different types of applications, as it allows users to better interact with and understand their environment.</p>
<h2 id='haptic-attributes'>Haptic Attributes</h2>
<p>Pison provides four (4) haptic attributes that can be controlled or modified to create different types of tactile sensations:</p>

<ul>
<li><p><strong>Frequency:</strong> The frequency of a haptic buzz refers to the number of vibrations or oscillations per second. Higher frequencies can create a more rapid or &quot;buzzy&quot; sensation, while lower frequencies can produce a slower, deeper vibration.</p></li>
<li><p><strong>Amplitude:</strong> The amplitude of a haptic buzz refers to the magnitude or intensity of the vibration. Larger amplitudes can create stronger, more noticeable vibrations, while smaller amplitudes will produce weaker, less noticeable sensations.</p></li>
<li><p><strong>Duration:</strong> The duration of a haptic buzz is the length of time that the vibration is applied. Longer durations can create a sustained vibration, while shorter durations will produce a brief, transient sensation.</p></li>
<li><p><strong>Waveform:</strong> The waveform of a haptic buzz refers to the shape of the electrical input signal used to drive the haptic motor. Different waveforms can produce different types of tactile sensations, such as sinusoidal waves for smooth, continuous vibrations or square waves for sharp, abrupt vibrations.</p></li>
</ul>
<h2 id='haptic-examples'>Haptic Examples</h2>
<blockquote>
<p>Here&#39;s an example of turning haptics on with an intensity of 90</p>
</blockquote>
<div class="highlight"><pre class="highlight kotlin tab-kotlin--android"><code><span class="c1">// ... </span>

        <span class="nc">GlobalScope</span><span class="p">.</span><span class="nf">launch</span> <span class="p">{</span>
            <span class="kd">val</span> <span class="py">hapticIntensity</span><span class="p">:</span> <span class="nc">Int</span> <span class="p">=</span> <span class="mi">90</span> 

            <span class="kd">val</span> <span class="py">hapticOn</span> <span class="p">=</span> <span class="nc">HapticOnCommand</span><span class="p">(</span><span class="n">hapticIntensity</span><span class="p">)</span>

            <span class="n">pisonRemoteDevice</span><span class="o">?.</span><span class="nf">sendHaptic</span><span class="p">(</span><span class="n">hapticON</span><span class="p">)</span>
        <span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight kotlin tab-kotlin--jvm"><code><span class="c1">// ... </span>

        <span class="nc">GlobalScope</span><span class="p">.</span><span class="nf">launch</span> <span class="p">{</span>
            <span class="kd">val</span> <span class="py">hapticIntensity</span><span class="p">:</span> <span class="nc">Int</span> <span class="p">=</span> <span class="mi">90</span> 

            <span class="kd">val</span> <span class="py">hapticOn</span> <span class="p">=</span> <span class="nc">HapticOnCommand</span><span class="p">(</span><span class="n">hapticIntensity</span><span class="p">)</span>

            <span class="n">pisonRemoteDevice</span><span class="o">?.</span><span class="nf">sendHaptic</span><span class="p">(</span><span class="n">hapticON</span><span class="p">)</span>
        <span class="p">}</span>
</code></pre></div>
<blockquote>
<p>Here&#39;s an example of turning haptics off</p>
</blockquote>
<div class="highlight"><pre class="highlight kotlin tab-kotlin--android"><code><span class="c1">// ... </span>
        <span class="nc">GlobalScope</span><span class="p">.</span><span class="nf">launch</span> <span class="p">{</span>
            <span class="kd">val</span> <span class="py">hapticOff</span> <span class="p">=</span> <span class="nc">HapticOffCommand</span>

            <span class="n">pisonRemoteDevice</span><span class="o">?.</span><span class="nf">sendHaptic</span><span class="p">(</span><span class="n">hapticOff</span><span class="p">)</span>
        <span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight kotlin tab-kotlin--jvm"><code><span class="c1">// ... </span>
        <span class="nc">GlobalScope</span><span class="p">.</span><span class="nf">launch</span> <span class="p">{</span>
            <span class="n">pisonRemoteDevice</span><span class="o">?.</span><span class="nf">sendHaptic</span><span class="p">(</span><span class="nc">HapticOffCommand</span><span class="p">)</span>
        <span class="p">}</span>
</code></pre></div>
<blockquote>
<p>Here is an example of sending 3 haptic bursts with an intensity of 60 and a duration of 1000 milliseconds per burst</p>
</blockquote>
<div class="highlight"><pre class="highlight kotlin tab-kotlin--android"><code><span class="c1">// ... </span>
        <span class="nc">GlobalScope</span><span class="p">.</span><span class="nf">launch</span> <span class="p">{</span>
            <span class="kd">val</span> <span class="py">hapticIntensity</span><span class="p">:</span> <span class="nc">Int</span> <span class="p">=</span> <span class="mi">60</span>
            <span class="kd">val</span> <span class="py">hapticDurationinMs</span> <span class="p">=</span> <span class="mi">1000</span>
            <span class="kd">val</span> <span class="py">numberOfBursts</span> <span class="p">=</span> <span class="mi">3</span>

            <span class="kd">val</span> <span class="py">hapticBurst</span> <span class="p">=</span> <span class="nc">HapticBurstCommand</span><span class="p">(</span><span class="n">hapticIntensity</span><span class="p">,</span> <span class="n">hapticDurationinMs</span><span class="p">,</span> <span class="n">numberOfBursts</span><span class="p">)</span>

            <span class="n">pisonRemoteDevice</span><span class="o">?.</span><span class="nf">sendHaptic</span><span class="p">(</span><span class="n">hapticBurst</span><span class="p">)</span>
        <span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight kotlin tab-kotlin--jvm"><code><span class="c1">// ... </span>
        <span class="nc">GlobalScope</span><span class="p">.</span><span class="nf">launch</span> <span class="p">{</span>
            <span class="kd">val</span> <span class="py">hapticIntensity</span><span class="p">:</span> <span class="nc">Int</span> <span class="p">=</span> <span class="mi">60</span>
            <span class="kd">val</span> <span class="py">hapticDurationinMs</span> <span class="p">=</span> <span class="mi">1000</span>
            <span class="kd">val</span> <span class="py">numberOfBursts</span> <span class="p">=</span> <span class="mi">3</span>

            <span class="kd">val</span> <span class="py">hapticBurst</span> <span class="p">=</span> <span class="nc">HapticBurstCommand</span><span class="p">(</span><span class="n">hapticIntensity</span><span class="p">,</span> <span class="n">hapticDurationinMs</span><span class="p">,</span> <span class="n">numberOfBursts</span><span class="p">)</span>

            <span class="n">pisonRemoteDevice</span><span class="o">?.</span><span class="nf">sendHaptic</span><span class="p">(</span><span class="n">hapticBurst</span><span class="p">)</span>
        <span class="p">}</span>
</code></pre></div>
<blockquote>
<p>Here is an example of sending a custom haptic &quot;waveform&quot; with a low intensity pulse followed by a high intensity pulse</p>
</blockquote>
<div class="highlight"><pre class="highlight kotlin tab-kotlin--android"><code><span class="c1">// ... </span>
        <span class="nc">GlobalScope</span><span class="p">.</span><span class="nf">launch</span> <span class="p">{</span>
            <span class="c1">// A low intensity pulse for 200ms, followed by 200ms of silence, </span>
            <span class="c1">// followed by a high intensity pulse for 200ms</span>
            <span class="kd">val</span> <span class="py">hapticQueue</span> <span class="p">=</span> <span class="nc">HapticQueueStep</span><span class="p">(</span><span class="nf">listOf</span><span class="p">(</span>
                <span class="nc">HapticQueueStep</span><span class="p">(</span><span class="n">intensity</span> <span class="p">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">timeOn</span> <span class="p">=</span> <span class="mi">200</span><span class="p">,</span> <span class="n">timeOff</span> <span class="p">=</span> <span class="mi">200</span><span class="p">),</span>
                <span class="nc">HapticQueueStep</span><span class="p">(</span><span class="n">intensity</span> <span class="p">=</span> <span class="mi">90</span><span class="p">,</span> <span class="n">timeOn</span> <span class="p">=</span> <span class="mi">200</span><span class="p">,</span> <span class="n">timeOff</span> <span class="p">=</span> <span class="mi">200</span><span class="p">)</span>
            <span class="p">))</span>

            <span class="n">pisonRemoteDevice</span><span class="o">?.</span><span class="nf">sendHaptic</span><span class="p">(</span><span class="n">hapticQueue</span><span class="p">)</span>
        <span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight kotlin tab-kotlin--jvm"><code><span class="c1">// ... </span>
        <span class="nc">GlobalScope</span><span class="p">.</span><span class="nf">launch</span> <span class="p">{</span>
            <span class="c1">// A low intensity pulse for 200ms, followed by 200ms of silence, </span>
            <span class="c1">// followed by a high intensity pulse for 200ms</span>
            <span class="kd">val</span> <span class="py">hapticQueue</span> <span class="p">=</span> <span class="nc">HapticQueueStep</span><span class="p">(</span><span class="nf">listOf</span><span class="p">(</span>
                <span class="nc">HapticQueueStep</span><span class="p">(</span><span class="n">intensity</span> <span class="p">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">timeOn</span> <span class="p">=</span> <span class="mi">200</span><span class="p">,</span> <span class="n">timeOff</span> <span class="p">=</span> <span class="mi">200</span><span class="p">),</span>
                <span class="nc">HapticQueueStep</span><span class="p">(</span><span class="n">intensity</span> <span class="p">=</span> <span class="mi">90</span><span class="p">,</span> <span class="n">timeOn</span> <span class="p">=</span> <span class="mi">200</span><span class="p">,</span> <span class="n">timeOff</span> <span class="p">=</span> <span class="mi">200</span><span class="p">)</span>
            <span class="p">))</span>

            <span class="n">pisonRemoteDevice</span><span class="o">?.</span><span class="nf">sendHaptic</span><span class="p">(</span><span class="n">hapticQueue</span><span class="p">)</span>
        <span class="p">}</span>
</code></pre></div>
<p>The SDK allows applications to send haptics to Pison devices using <code>Haptic Commands</code>. </p>

<p>Before sending any haptics, make sure you have an actively monitored <code>pisonRemoteDevice</code> connected to the server.</p>

<p>Check out the <code>Connecting to a Server</code> and <code>Monitoring Pison Devices</code> sections to see how to bind to the pison server and monitor states in a <code>pisonRemoteDevice</code> </p>

<ul>
<li><code>sendHaptic()</code> - call this method and pass a haptic command of your choosing as a parameter. This is a suspend function, therefore you will need a coroutine to call this method. </li>
</ul>

<p>Keep in mind that you must turn haptics on before sending any bursts. </p>

<p>If you are new to coroutines check out <a href="https://kotlinlang.org/docs/reference/coroutines/basics.html">this overview</a> and <a href="https://developer.android.com/codelabs/kotlin-coroutines#0">this codelab</a> to get familiar with them. </p>
<h3 id='1-hapticoncommand'>1. HapticOnCommand</h3>
<ul>
<li><p>The <code>HapticOnCommand(intensity)</code> turns haptics on. </p></li>
<li><p>It takes an integer between 0 and 100 for intensity and alerts the user that is on by sending a sending a prolonged haptic vibration</p></li>
</ul>
<h3 id='2-hapticoffcommand'>2. HapticOffCommand</h3>
<p>The <code>HapticOffCommand()</code> turns haptics off and has no parameters. </p>
<h3 id='3-hapticburstcommand'>3. HapticBurstCommand</h3>
<p>The <code>HapticBurstCommand(intensity, durationMS, numberBursts)</code> sends one or more haptic bursts vibration with of a configurable length, intensity and number of bursts.</p>

<p>It takes as parameters:</p>

<ul>
<li><code>intensity</code> - an integer with a range of 1 - 100</li>
<li><code>duration</code> an integer of the vibration in milliseconds with a range of 50 - 2000</li>
<li><code>number of bursts</code> an integer for the number of bursts with a range of 1 - 100 </li>
</ul>
<h3 id='4-hapticqueuecommand'>4. HapticQueueCommand</h3>
<p>The <code>HapticQueueCommand(queueSteps)</code> sends a custom sequence of pulses defined by the caller.</p>

<p>It takes as parameters:</p>

<ul>
<li><code>queueSteps</code> - a <code>List&lt;HapticQueueStep&gt;</code> (see below). The steps are executed back-to-back, in order.</li>
</ul>

<p>Each <code>HapticQueueStep</code> takes the following parameters:</p>

<ul>
<li><code>intensity</code> - an integer with a range of 1 - 100 for this pulse</li>
<li><code>timeOn</code> - an integer representing the amount of time in milliseconds that this pulse should last.</li>
<li><code>timeOff</code>- an integer representing the amount of time in milliseconds of &quot;silence&quot; (haptics off) between this pulse and the next.</li>
<li><code>override</code> - an optional boolean value, internal use only. Defaults to false.</li>
</ul>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="kotlin--android">kotlin--android</a>
                <a href="#" data-language-name="kotlin--jvm">kotlin--jvm</a>
          </div>
      </div>
    </div>
  </body>
</html>
